name: changedlog

on:
  push:
    tags:
      # ä»…å½“ git push ä¸€ä¸ªå½¢å¦‚ 1.0.0 çš„ tag æ—¶è§¦å‘
      # åŒ¹é…ç±»ä¼¼ 1.0.0ã€2.3.4 è¿™æ ·çš„ tag
      - '[0-9]+.[0-9]+.[0-9]+'

jobs:
  release:
    runs-on: ubuntu-latest
    permissions:
      contents: write  # å…è®¸åˆ›å»º Release
      pull-requests: read

    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        with:
          fetch-depth: 0  # è·å–å®Œæ•´å†å²ï¼Œç”¨äºç”Ÿæˆ changelog

      # ğŸ“œ ç”Ÿæˆ changelogï¼ˆåŸºäº commitï¼‰
      - name: Generate Changelog
        id: changelog
        uses: mikepenz/release-changelog-builder-action@v3
        with:
          configuration: |
            {
              "categories": [
                {
                  "title": "## ğŸš€ æ–°åŠŸèƒ½",
                  "labels": ["feature", "enhancement"]
                },
                {
                  "title": "## ğŸ› ä¿®å¤",
                  "labels": ["fix", "bug"]
                },
                {
                  "title": "## ğŸ§© å…¶ä»–",
                  "labels": ["chore", "refactor", "docs"]
                }
              ],
              "excludeLabels": ["no-changelog"]
            }
